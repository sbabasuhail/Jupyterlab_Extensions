"use strict";
Object.defineProperty(exports, Symbol.toStringTag, { value: "Module" });
const jsxRuntime = require("@emotion/react/jsx-runtime");
const React = require("react");
const useDefaultProps = require("../../hooks/useDefaultProps.cjs");
const useUniqueId = require("../../hooks/useUniqueId.cjs");
const useControlled = require("../../hooks/useControlled.cjs");
const setId = require("../../utils/setId.cjs");
const CheckBox_styles = require("./CheckBox.styles.cjs");
const validationStates = require("../Forms/FormElement/validationStates.cjs");
const BaseCheckBox = require("../BaseCheckBox/BaseCheckBox.cjs");
const FormElement = require("../Forms/FormElement/FormElement.cjs");
const Label = require("../Forms/Label/Label.cjs");
const WarningText = require("../Forms/WarningText/WarningText.cjs");
const HvCheckBox = (props) => {
  const {
    id,
    classes: classesProp,
    className,
    name,
    checked,
    status,
    indeterminate,
    statusMessage,
    label,
    labelProps,
    inputProps,
    value = "on",
    required = false,
    readOnly = false,
    disabled = false,
    semantic = false,
    defaultChecked = false,
    "aria-label": ariaLabel,
    "aria-labelledby": ariaLabelledBy,
    "aria-describedby": ariaDescribedBy,
    "aria-errormessage": ariaErrorMessage,
    onChange,
    onFocusVisible,
    onBlur,
    ...others
  } = useDefaultProps.useDefaultProps("HvCheckBox", props);
  const {
    classes,
    cx
  } = CheckBox_styles.useClasses(classesProp);
  const elementId = useUniqueId.useUniqueId(id, "hvcheckbox");
  const [focusVisible, setFocusVisible] = React.useState(false);
  const [validationState, setValidationState] = useControlled.useControlled(status, "standBy");
  const [validationMessage] = useControlled.useControlled(statusMessage, "Required");
  const [isChecked, setIsChecked] = useControlled.useControlled(checked, Boolean(defaultChecked));
  const [isIndeterminate, setIsIndeterminate] = useControlled.useControlled(checked !== void 0 ? indeterminate : void 0, Boolean(indeterminate));
  const isStateInvalid = validationStates.isInvalid(validationState);
  const onChangeCallback = React.useCallback((event, newChecked) => {
    setIsChecked(() => {
      setIsIndeterminate(false);
      if (required && !newChecked) {
        setValidationState("invalid");
      } else {
        setValidationState("valid");
      }
      return newChecked;
    });
    onChange == null ? void 0 : onChange(event, newChecked, value);
  }, [onChange, required, setIsChecked, setIsIndeterminate, setValidationState, value]);
  const onFocusVisibleCallback = (event) => {
    setFocusVisible(true);
    onFocusVisible == null ? void 0 : onFocusVisible(event);
  };
  const onBlurCallback = (event) => {
    setFocusVisible(false);
    onBlur == null ? void 0 : onBlur(event);
  };
  const canShowError = ariaErrorMessage == null && (status !== void 0 && statusMessage !== void 0 || status === void 0 && required);
  const hasLabel = label != null;
  let errorMessageId;
  if (isStateInvalid) {
    errorMessageId = canShowError ? setId.setId(elementId, "error") : ariaErrorMessage;
  }
  const checkbox = /* @__PURE__ */ jsxRuntime.jsx(BaseCheckBox.HvBaseCheckBox, { id: hasLabel ? setId.setId(elementId, "input") : setId.setId(id, "input"), name, className: cx(classes.checkbox, {
    [classes.invalidCheckbox]: isStateInvalid
  }), disabled, readOnly, required, onChange: onChangeCallback, value, checked: isChecked, indeterminate: isIndeterminate, semantic, inputProps: {
    "aria-invalid": isStateInvalid ? true : void 0,
    "aria-errormessage": errorMessageId,
    "aria-label": ariaLabel,
    "aria-labelledby": ariaLabelledBy,
    "aria-describedby": ariaDescribedBy,
    ...inputProps
  }, onFocusVisible: onFocusVisibleCallback, onBlur: onBlurCallback, ...others });
  return /* @__PURE__ */ jsxRuntime.jsxs(FormElement.HvFormElement, { id, name, status: validationState, disabled, required, readOnly, className: cx(classes.root, {
    [classes.focusVisible]: !!(focusVisible && label)
  }, className), children: [
    hasLabel ? /* @__PURE__ */ jsxRuntime.jsxs("div", { className: cx(classes.container, {
      [classes.disabled]: disabled,
      [classes.invalidContainer]: isStateInvalid
    }), children: [
      checkbox,
      /* @__PURE__ */ jsxRuntime.jsx(Label.HvLabel, { id: setId.setId(elementId, "label"), htmlFor: setId.setId(elementId, "input"), label, className: classes.label, ...labelProps })
    ] }) : checkbox,
    canShowError && /* @__PURE__ */ jsxRuntime.jsx(WarningText.HvWarningText, { id: setId.setId(elementId, "error"), disableAdornment: !hasLabel, hideText: !hasLabel, disableBorder: true, children: validationMessage })
  ] });
};
exports.checkBoxClasses = CheckBox_styles.staticClasses;
exports.HvCheckBox = HvCheckBox;
//# sourceMappingURL=CheckBox.cjs.map
