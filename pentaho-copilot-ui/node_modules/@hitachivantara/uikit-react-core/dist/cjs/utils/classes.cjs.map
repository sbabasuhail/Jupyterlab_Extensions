{"version":3,"file":"classes.cjs","sources":["../../../src/utils/classes.ts"],"sourcesContent":["import { CSSInterpolation } from \"@emotion/css\";\nimport { useCss } from \"@core/hooks/useCss\";\n\nexport type ExtractNames<\n  T extends (...args: any) => { classes: Record<string, any>; cx: any }\n> = Partial<ReturnType<T>[\"classes\"]>;\n\nexport const getClasses = <T extends string, N extends string>(\n  keys: T[],\n  name: N\n) => {\n  const classesObj: Record<string, string> = {};\n  keys.forEach((key: string) => {\n    classesObj[key] = `${name}-${key}`;\n  });\n  return classesObj as { [P in T]: `${N}-${P}` };\n};\n\nconst deepRenameKeys = <T extends object>(\n  obj: T,\n  mapFn: (key: string) => string\n): T => {\n  const result: any = {};\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      const newKey = mapFn(key);\n      const value = obj[key];\n      result[newKey] =\n        typeof value === \"object\" ? deepRenameKeys(value as any, mapFn) : value;\n    }\n  }\n  return result;\n};\n\n/** Given a `stylesObj`, replaces its keys' `$myClass` with `.{name}-myClass`. */\nexport const replace$ = <T extends object>(stylesObj: T, name: string): T => {\n  return deepRenameKeys(stylesObj, (key) => {\n    const matches = key.match(/\\$\\w+/g);\n    if (!matches?.length) return key;\n    const newKey = matches.reduce(\n      (acc, match) => acc.replace(match, `.${name}-${match.slice(1)}`),\n      key\n    );\n    return newKey ?? key;\n  });\n};\n\n/** Utility function to create classes for a component. */\nexport function createClasses<Name extends string, ClassName extends string>(\n  /** Component name in PascalCase (ie. `HvTableCell`). */\n  name: Name,\n  stylesObject: Record<ClassName, CSSInterpolation>\n) {\n  const styles = replace$(stylesObject, name);\n\n  const staticClasses = getClasses(Object.keys(styles) as ClassName[], name);\n\n  /**\n   * Hook that takes in a component's `classesProp` overrides, and returns the\n   * concatenated static/internal/override `classes`, and the cached `cx` and `css` utilities.\n   */\n  function useClasses(\n    classesProp: Partial<Record<ClassName, string>> = {},\n    /** Whether to add the static classes. Disable when included by `classesProp` */\n    addStatic = true\n  ) {\n    const { cx, css } = useCss();\n\n    const mergeClasses = (key: string) =>\n      cx(addStatic && `${name}-${key}`, css(styles[key]), classesProp?.[key]);\n\n    const classes = Object.fromEntries(\n      Object.keys(styles).map((key) => [key, mergeClasses(key)])\n    ) as { [P in ClassName]: string };\n\n    return { classes, css, cx };\n  }\n\n  return { useClasses, staticClasses };\n}\n"],"names":["getClasses","keys","name","classesObj","forEach","key","deepRenameKeys","obj","mapFn","result","Object","prototype","hasOwnProperty","call","newKey","value","replace$","stylesObj","matches","match","length","reduce","acc","replace","slice","createClasses","stylesObject","styles","staticClasses","useClasses","classesProp","addStatic","cx","css","useCss","mergeClasses","classes","fromEntries","map"],"mappings":";;;AAOaA,MAAAA,aAAa,CACxBC,MACAC,SACG;AACH,QAAMC,aAAqC,CAAA;AACtCC,OAAAA,QAAQ,CAACC,QAAgB;AAC5BF,eAAWE,GAAG,IAAK,GAAEH,IAAK,IAAGG,GAAI;AAAA,EAAA,CAClC;AACMF,SAAAA;AACT;AAEA,MAAMG,iBAAiB,CACrBC,KACAC,UACM;AACN,QAAMC,SAAc,CAAA;AACpB,aAAWJ,OAAOE,KAAK;AACrB,QAAIG,OAAOC,UAAUC,eAAeC,KAAKN,KAAKF,GAAG,GAAG;AAC5CS,YAAAA,SAASN,MAAMH,GAAG;AAClBU,YAAAA,QAAQR,IAAIF,GAAG;AACdS,aAAAA,MAAM,IACX,OAAOC,UAAU,WAAWT,eAAeS,OAAcP,KAAK,IAAIO;AAAAA,IACtE;AAAA,EACF;AACON,SAAAA;AACT;AAGaO,MAAAA,WAAW,CAAmBC,WAAcf,SAAoB;AACpEI,SAAAA,eAAeW,WAAYZ,CAAQ,QAAA;AAClCa,UAAAA,UAAUb,IAAIc,MAAM,QAAQ;AAClC,QAAI,EAACD,mCAASE;AAAef,aAAAA;AAC7B,UAAMS,SAASI,QAAQG,OACrB,CAACC,KAAKH,UAAUG,IAAIC,QAAQJ,OAAQ,IAAGjB,IAAK,IAAGiB,MAAMK,MAAM,CAAC,CAAE,EAAC,GAC/DnB,GACF;AACA,WAAOS,UAAUT;AAAAA,EAAAA,CAClB;AACH;AAGgBoB,SAAAA,cAEdvB,MACAwB,cACA;AACMC,QAAAA,SAASX,SAASU,cAAcxB,IAAI;AAE1C,QAAM0B,gBAAgB5B,WAAWU,OAAOT,KAAK0B,MAAM,GAAkBzB,IAAI;AAMzE,WAAS2B,WACPC,cAAkD,IAElDC,YAAY,MACZ;AACM,UAAA;AAAA,MAAEC;AAAAA,MAAIC;AAAAA,QAAQC,OAAO,OAAA;AAE3B,UAAMC,eAAeA,CAAC9B,QACpB2B,GAAGD,aAAc,GAAE7B,IAAK,IAAGG,GAAI,IAAG4B,IAAIN,OAAOtB,GAAG,CAAC,GAAGyB,2CAAczB,IAAI;AAExE,UAAM+B,UAAU1B,OAAO2B,YACrB3B,OAAOT,KAAK0B,MAAM,EAAEW,IAAKjC,CAAAA,QAAQ,CAACA,KAAK8B,aAAa9B,GAAG,CAAC,CAAC,CAC3D;AAEO,WAAA;AAAA,MAAE+B;AAAAA,MAASH;AAAAA,MAAKD;AAAAA,IAAAA;AAAAA,EACzB;AAEO,SAAA;AAAA,IAAEH;AAAAA,IAAYD;AAAAA,EAAAA;AACvB;;;;"}