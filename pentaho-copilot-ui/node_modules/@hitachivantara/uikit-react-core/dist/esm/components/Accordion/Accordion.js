import { jsxs, jsx } from "@emotion/react/jsx-runtime";
import { useCallback, useMemo } from "react";
import { useDefaultProps } from "../../hooks/useDefaultProps.js";
import { DropUpXS, DropDownXS } from "@hitachivantara/uikit-react-icons";
import { useControlled } from "../../hooks/useControlled.js";
import { setId } from "../../utils/setId.js";
import { useClasses } from "./Accordion.styles.js";
import { staticClasses } from "./Accordion.styles.js";
import { HvTypography } from "../Typography/Typography.js";
const HvAccordion = (props) => {
  const {
    id,
    className,
    classes: classesProp,
    disabled = false,
    label,
    onChange,
    children,
    expanded,
    headingLevel,
    defaultExpanded = false,
    containerProps,
    labelVariant = "label",
    ...others
  } = useDefaultProps("HvAccordion", props);
  const {
    classes,
    cx
  } = useClasses(classesProp);
  const [isOpen, setIsOpen] = useControlled(expanded, Boolean(defaultExpanded));
  const handleAction = useCallback((event) => {
    if (!disabled) {
      onChange == null ? void 0 : onChange(event, isOpen);
      setIsOpen(!isOpen);
      return true;
    }
    return false;
  }, [disabled, onChange, isOpen, setIsOpen]);
  const handleClick = useCallback((event) => {
    handleAction(event);
    event.preventDefault();
    event.stopPropagation();
  }, [handleAction]);
  const handleKeyDown = useCallback((event) => {
    let isEventHandled = false;
    const {
      key
    } = event;
    if (event.altKey || event.ctrlKey || event.metaKey || event.currentTarget !== event.target) {
      return;
    }
    switch (key) {
      case "Enter":
      case " ":
        isEventHandled = handleAction(event);
        break;
      default:
        return;
    }
    if (isEventHandled) {
      event.preventDefault();
      event.stopPropagation();
    }
  }, [handleAction]);
  const accordionHeaderId = setId(id, "button");
  const accordionContainer = setId(id, "container");
  const accordionHeader = useMemo(() => {
    const color = disabled && ["secondary_60"] || void 0;
    const accordionButton = /* @__PURE__ */ jsxs(HvTypography, { id: accordionHeaderId, component: "div", role: "button", className: cx(classes.label, {
      [classes.disabled]: disabled
    }), disabled, tabIndex: 0, onKeyDown: handleKeyDown, onClick: handleClick, variant: labelVariant, "aria-expanded": isOpen, "aria-disabled": disabled, children: [
      isOpen ? /* @__PURE__ */ jsx(DropUpXS, { color }) : /* @__PURE__ */ jsx(DropDownXS, { color }),
      label
    ] });
    const result = headingLevel === void 0 ? accordionButton : /* @__PURE__ */ jsx(HvTypography, { component: `h${headingLevel}`, variant: labelVariant, children: accordionButton });
    return result;
  }, [cx, classes, handleClick, handleKeyDown, label, accordionHeaderId, disabled, headingLevel, isOpen, labelVariant]);
  return /* @__PURE__ */ jsxs("div", { id, className: cx(classes.root, className), ...others, children: [
    accordionHeader,
    /* @__PURE__ */ jsx("div", { id: accordionContainer, role: "region", "aria-labelledby": accordionHeaderId, className: cx(classes.container, {
      [classes.hidden]: !isOpen
    }), hidden: !isOpen, ...containerProps, children })
  ] });
};
export {
  HvAccordion,
  staticClasses as accordionClasses
};
//# sourceMappingURL=Accordion.js.map
