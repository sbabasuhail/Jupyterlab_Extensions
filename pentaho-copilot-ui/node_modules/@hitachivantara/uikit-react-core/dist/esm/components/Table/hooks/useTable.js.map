{"version":3,"file":"useTable.js","sources":["../../../../../src/components/Table/hooks/useTable.ts"],"sourcesContent":["import { useMemo } from \"react\";\nimport {\n  useTable,\n  usePagination,\n  useExpanded,\n  useSortBy,\n  useResizeColumns,\n  Cell,\n  ColumnInstance,\n  ColumnInterface,\n  Hooks,\n  Renderer,\n  Row,\n  TableCellProps,\n  TableFooterProps,\n  TableHeaderProps,\n  TableInstance,\n  TableOptions,\n  TableProps,\n  TableRowProps,\n  TableState,\n  UseColumnOrderInstanceProps,\n  UseColumnOrderState,\n  UseExpandedHooks,\n  UseExpandedInstanceProps,\n  UseExpandedOptions,\n  UseExpandedState,\n  UseFiltersColumnOptions,\n  UseFiltersColumnProps,\n  UseFiltersInstanceProps,\n  UseFiltersOptions,\n  UseFiltersState,\n  UseGlobalFiltersInstanceProps,\n  UseGlobalFiltersOptions,\n  UseGlobalFiltersState,\n  UseGroupByCellProps,\n  UseGroupByColumnOptions,\n  UseGroupByColumnProps,\n  UseGroupByHooks,\n  UseGroupByInstanceProps,\n  UseGroupByOptions,\n  UseGroupByRowProps,\n  UseGroupByState,\n  UsePaginationInstanceProps,\n  UsePaginationOptions,\n  UsePaginationState,\n  UseResizeColumnsColumnOptions,\n  UseResizeColumnsColumnProps,\n  UseResizeColumnsOptions,\n  UseResizeColumnsState,\n  UseSortByColumnOptions,\n  UseSortByColumnProps,\n  UseSortByHooks,\n  UseSortByInstanceProps,\n  UseSortByOptions,\n  UseSortByState,\n  UseRowStateState,\n  UseRowStateOptions,\n  UseGlobalFiltersColumnOptions,\n  UseRowStateInstanceProps,\n  UseRowStateRowProps,\n  UseTableHeaderGroupProps,\n  PluginHook,\n  ActionType,\n  ReducerTableState,\n} from \"react-table\";\nimport useHvTableStyles, {\n  UseHvTableStylesTableOptions,\n  UseHvTableStylesColumnOptions,\n  UseHvTableStylesTableCellProps,\n  UseHvTableStylesTableRowProps,\n} from \"./useTableStyles\";\nimport {\n  UseHvTableStickyCellProps,\n  UseHvTableStickyColumnProps,\n  UseHvTableStickyHooks,\n  UseHvTableStickyTableInstance,\n  UseHvTableStickyTableOptions,\n  UseHvTableStickyTableProps,\n} from \"./useSticky\";\nimport { UseHvSortByColumnProps, UseHvSortByTableCellProps } from \"./useSortBy\";\nimport {\n  UseHvRowSelectionHooks,\n  UseHvRowSelectionRowInstance,\n  UseHvRowSelectionState,\n  UseHvRowSelectionTableInstance,\n  UseHvRowSelectionTableOptions,\n  UseHvRowSelectionTableRowProps,\n} from \"./useRowSelection\";\nimport {\n  UseHvPaginationHooks,\n  UseHvPaginationTableInstance,\n} from \"./usePagination\";\nimport {\n  UseHvBulkActionsHooks,\n  UseHvBulkActionsTableInstanceProps,\n  UseHvBulkActionsTableOptions,\n} from \"./useBulkActions\";\nimport {\n  UseHvRowExpandTableOptions,\n  UseHvRowExpandRowInstance,\n  UseHvRowExpandTableRowProps,\n} from \"./useRowExpand\";\nimport {\n  UseHvHeaderGroupsColumnProps,\n  UseHvHeaderGroupsCellProps,\n  UseHvHeaderGroupsInstance,\n} from \"./useHeaderGroups\";\nimport {\n  UseHvResizeColumnProps,\n  UseHvResizeTableCellProps,\n} from \"./useResizeColumns\";\nimport { HvTableRowProps } from \"../TableRow\";\nimport { HvTableProps } from \"../Table\";\nimport { HvTableCellProps } from \"../TableCell\";\nimport { HvTableHeaderProps } from \"../TableHeader\";\n\n// #region ##### TYPES #####\n\ntype Accessor<D extends object> = (\n  originalRow: D,\n  index: number,\n  sub: {\n    subRows: D[];\n    depth: number;\n    data: D[];\n  }\n) => CellValue;\n\ntype ValueOf<T> = T[keyof T];\ntype StringKey<D> = Extract<keyof D, string>;\ntype IdType<D> = StringKey<D> | string;\ntype CellValue<V = any> = V;\n\ntype HvHeaderProps<D extends object = Record<string, unknown>> =\n  HvTableInstance<D> & {\n    column: HvColumnInstance<D>;\n  };\n\ninterface HvMetaBase<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> {\n  instance: HvTableInstance<D, H>;\n  userProps: any;\n}\n\nexport type HvMeta<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer,\n  Extension = never,\n  M = HvMetaBase<D, H>\n> = [Extension] extends [never] ? M : M & Extension;\n\nexport type HvPropGetter<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer,\n  Props extends object = Record<string, unknown>,\n  T extends object = never,\n  P = Partial<Props>\n> = ((props: P, meta: HvMeta<D, H, T>) => P | P[]) | P | P[];\n\nexport type HvTableHeaderRenderer<D extends object = Record<string, unknown>> =\n  Renderer<HvHeaderProps<D>>;\n\ntype HvFooterProps<D extends object = Record<string, unknown>> =\n  HvTableInstance<D> & {\n    column: HvColumnInstance<D>;\n  };\n\ninterface HvHeaderGroup<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> extends HvColumnInstance<D, H>,\n    Omit<UseTableHeaderGroupProps<D>, \"headers\"> {\n  headers: Array<HvHeaderGroup<D, H>>;\n}\n\ntype HvRowPropGetter<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> = HvPropGetter<D, H, HvUseTableRowProps, { row: HvRowInstance<D, H> }>;\n\ntype HvTablePropGetter<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> = HvPropGetter<D, H, HvUseTableProps>;\n\ntype HvCellPropGetter<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> = HvPropGetter<D, H, HvUseTableCellProps, { cell: HvCellInstance<D, H> }>;\n\ntype HvHeaderPropGetter<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> = HvPropGetter<D, H, HvUseTableHeaderProps, { column: HvHeaderGroup<D, H> }>;\n\ntype HvFooterPropGetter<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> = HvPropGetter<D, H, HvUseTableFooterProps, { column: HvHeaderGroup<D, H> }>;\n\nexport interface HvCellProps<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer,\n  V = any\n> extends HvTableInstance<D, H> {\n  column: HvColumnInstance<D, H>;\n  row: HvRowInstance<D, H>;\n  cell: HvCellInstance<D, H, V>;\n  value: CellValue<V>;\n}\n\nexport type HvTableDefinitionConfig<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> = HvTableOptions<D, H>;\n\ninterface HvColumnInterfaceBasedOnValue<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer,\n  V = any\n> {\n  Cell?: Renderer<HvCellProps<D, H, V>>;\n}\n\ninterface HvColumnGroupInterface<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> {\n  columns: Array<HvTableColumnConfig<D, H>>;\n}\n\ntype HvColumnGroup<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> = HvTableColumnOptions<D, H> &\n  HvColumnGroupInterface<D, H> &\n  (\n    | { Header: H }\n    | ({ id: IdType<D> } & {\n        Header: H;\n      })\n  ) & { accessor?: Accessor<D> };\n\ntype HvColumnWithStrictAccessor<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> = HvTableColumnOptions<D, H> &\n  ValueOf<{\n    [K in keyof D]: {\n      accessor: K;\n    } & HvColumnInterfaceBasedOnValue<D, H, D[K]>;\n  }>;\n\ntype HvColumnWithLooseAccessor<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> = HvTableColumnOptions<D, H> &\n  HvColumnInterfaceBasedOnValue<D, H> &\n  (\n    | { Header: H }\n    | { id: IdType<D> }\n    | { accessor: keyof D extends never ? IdType<D> : never }\n  ) & {\n    accessor?: keyof D extends never ? IdType<D> | Accessor<D> : Accessor<D>;\n  };\n\nexport type HvTableColumnConfig<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> =\n  | HvColumnGroup<D, H>\n  | HvColumnWithLooseAccessor<D, H>\n  | HvColumnWithStrictAccessor<D, H>;\n\n// #region HOOKS\nexport interface HvHooks<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> extends Omit<Hooks<D>, \"useOptions\">,\n    Partial<UseExpandedHooks<D>>,\n    Partial<UseGroupByHooks<D>>,\n    Partial<UseSortByHooks<D>>,\n    Partial<UseHvRowSelectionHooks<D>>,\n    Partial<UseHvTableStickyHooks<D>>,\n    Partial<UseHvPaginationHooks<D>>,\n    Partial<UseHvBulkActionsHooks<D>> {\n  useOptions: Array<\n    (\n      options: HvTableOptions<D, H>,\n      args: HvTableOptions<D, H>\n    ) => HvTableOptions<D, H>\n  >;\n  stateReducers: Array<\n    (\n      newState: HvTableState<D>,\n      action: ActionType,\n      previousState?: HvTableState<D>,\n      instance?: HvTableState<D>\n    ) => ReducerTableState<D> | undefined\n  >;\n  columns: Array<\n    (\n      columns: Array<HvTableColumnConfig<D, H>>,\n      meta: HvMeta<D, H>\n    ) => Array<HvTableColumnConfig<D, H>>\n  >;\n  allColumns: Array<\n    (\n      allColumns: Array<HvColumnInstance<D, H>>,\n      meta: HvMeta<D, H>\n    ) => Array<HvTableColumnConfig<D, H>>\n  >;\n  visibleColumns: Array<\n    (\n      allColumns: Array<HvColumnInstance<D, H>>,\n      meta: HvMeta<D, H>\n    ) => Array<HvTableColumnConfig<D, H>>\n  >;\n  headerGroups: Array<\n    (\n      allColumns: Array<HvHeaderGroup<D, H>>,\n      meta: HvMeta<D, H>\n    ) => Array<HvHeaderGroup<D, H>>\n  >;\n  useInstanceBeforeDimensions: Array<(instance: HvTableInstance<D, H>) => void>;\n  useInstance: Array<(instance: HvTableInstance<D, H>) => void>;\n  useControlledState: Array<\n    (state: HvTableState<D>, meta: HvMeta<D, H>) => HvTableState<D>\n  >;\n  getTableProps: Array<HvTablePropGetter<D, H>>;\n  getHeaderProps: Array<HvHeaderPropGetter<D>>;\n  getFooterProps: Array<HvFooterPropGetter<D>>;\n  getRowProps: Array<HvRowPropGetter<D>>;\n  getCellProps: Array<HvCellPropGetter<D>>;\n  useFinalInstance: Array<(instance: HvTableInstance<D, H>) => void>;\n}\n// #endregion\n\n// #region STATE\nexport interface HvTableState<D extends object = Record<string, unknown>>\n  extends TableState<D>,\n    Partial<UseColumnOrderState<D>>,\n    Partial<UseExpandedState<D>>,\n    Partial<UseFiltersState<D>>,\n    Partial<UseGlobalFiltersState<D>>,\n    Partial<UseGroupByState<D>>,\n    Partial<UsePaginationState<D>>,\n    Partial<UseResizeColumnsState<D>>,\n    Partial<UseSortByState<D>>,\n    Partial<UseRowStateState<D>>,\n    Partial<UseHvRowSelectionState<D>> {\n  rowCount: number;\n}\n// #endregion\n\n// #region OPTIONS\nexport interface HvTableOptions<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> extends Omit<\n      TableOptions<D>,\n      | \"columns\"\n      | \"data\"\n      | \"defaultColumn\"\n      | \"stateReducer\"\n      | \"useControlledState\"\n      | \"getRowId\"\n    >,\n    Partial<UseExpandedOptions<D>>,\n    Partial<UseFiltersOptions<D>>,\n    Partial<UseGlobalFiltersOptions<D>>,\n    Partial<UseGroupByOptions<D>>,\n    Partial<UsePaginationOptions<D>>,\n    Partial<UseResizeColumnsOptions<D>>,\n    Partial<UseSortByOptions<D>>,\n    Partial<UseRowStateOptions<D>>,\n    Partial<UseHvTableStylesTableOptions>,\n    Partial<UseHvRowSelectionTableOptions>,\n    Partial<UseHvTableStickyTableOptions>,\n    Partial<UseHvBulkActionsTableOptions>,\n    Partial<UseHvRowExpandTableOptions> {\n  columns?: Array<HvTableColumnConfig<D, H>>;\n  data?: D[];\n  initialState?: Partial<HvTableState<D>>;\n  labels?: Record<string, string>;\n  defaultColumn?: Partial<HvTableColumnConfig<D, H>>;\n  stateReducer?: (\n    newState: HvTableState<D>,\n    action: ActionType,\n    previousState: HvTableState<D>,\n    instance?: HvTableInstance<D, H>\n  ) => HvTableState<D>;\n  useControlledState?: (\n    state: HvTableState<D>,\n    meta: HvMeta<D, H>\n  ) => HvTableState<D>;\n  getRowId?: (\n    originalRow: D,\n    relativeIndex: number,\n    parent?: HvRowInstance<D, H>\n  ) => string;\n}\n\nexport interface HvTableColumnOptions<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> extends Omit<ColumnInterface<D>, \"Header\" | \"Footer\">,\n    Partial<UseFiltersColumnOptions<D>>,\n    Partial<UseGroupByColumnOptions<D>>,\n    Partial<UseResizeColumnsColumnOptions<D>>,\n    Partial<UseSortByColumnOptions<D>>,\n    Partial<UseGlobalFiltersColumnOptions<D>>,\n    Partial<UseHvTableStylesColumnOptions> {\n  Header?: H;\n  Footer?: Renderer<HvFooterProps<D>>;\n  originalId?: IdType<D>;\n}\n// #endregion\n\n// #region INSTANCE\nexport interface HvTableInstance<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> extends Omit<\n      TableInstance<D>,\n      | \"pageCount\"\n      | \"data\"\n      | \"columns\"\n      | \"rows\"\n      | \"allColumns\"\n      | \"visibleColumns\"\n      | \"headers\"\n      | \"flatHeaders\"\n      | \"rowsById\"\n      | \"prepareRow\"\n      | \"flatRows\"\n      | \"headerGroups\"\n      | \"footerGroups\"\n      | \"defaultColumn\"\n      | \"stateReducer\"\n      | \"useControlledState\"\n      | \"getRowId\"\n      | \"getHooks\"\n      | \"getTableProps\"\n    >,\n    Omit<HvTableOptions<D, H>, \"pageCount\" | \"columns\">,\n    Partial<UseColumnOrderInstanceProps<D>>,\n    Partial<Omit<UseExpandedInstanceProps<D>, \"rows\">>,\n    Partial<Omit<UseFiltersInstanceProps<D>, \"rows\" | \"rowsById\" | \"flatRows\">>,\n    Partial<\n      Omit<UseGlobalFiltersInstanceProps<D>, \"rows\" | \"rowsById\" | \"flatRows\">\n    >,\n    Partial<Omit<UseGroupByInstanceProps<D>, \"rows\" | \"rowsById\" | \"flatRows\">>,\n    Partial<Omit<UsePaginationInstanceProps<D>, \"page\">>,\n    Partial<Omit<UseSortByInstanceProps<D>, \"rows\">>,\n    Partial<UseRowStateInstanceProps<D>>,\n    Partial<Omit<UseHvRowSelectionTableInstance<D>, \"selectedFlatRows\">>,\n    Partial<UseHvTableStickyTableInstance<D>>,\n    Partial<UseHvHeaderGroupsInstance>,\n    Partial<UseHvPaginationTableInstance<D>>,\n    Partial<UseHvBulkActionsTableInstanceProps<D>> {\n  initialState: Partial<HvTableState<D>>;\n  state: HvTableState<D>;\n  columns: Array<HvColumnInstance<D, H>>;\n  allColumns: Array<HvColumnInstance<D, H>>;\n  visibleColumns: Array<HvColumnInstance<D, H>>;\n  headers: Array<HvColumnInstance<D, H>>;\n  flatHeaders: Array<HvColumnInstance<D, H>>;\n  rows: Array<HvRowInstance<D, H>>;\n  page: Array<HvRowInstance<D, H>>;\n  rowsById: Record<string, HvRowInstance<D, H>>;\n  flatRows: Array<HvRowInstance<D, H>>;\n  getHooks: () => HvHooks<D>;\n  getTableProps: (propGetter?: HvTablePropGetter<D, H>) => HvUseTableProps;\n  prepareRow: (row: HvRowInstance<D, H>) => void;\n  selectedFlatRows: Array<HvRowInstance<D, H>>;\n  initialRows: Array<HvRowInstance<D, H>>;\n  initialRowsById: Record<string, HvRowInstance<D, H>>;\n  labels: Record<string, string>;\n  headerGroups: Array<HvHeaderGroup<D, H>>;\n  footerGroups: Array<HvHeaderGroup<D, H>>;\n}\n\nexport interface HvColumnInstance<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> extends Omit<\n      ColumnInstance<D>,\n      | \"Cell\"\n      | \"columns\"\n      | \"parent\"\n      | \"placeholderOf\"\n      | \"id\"\n      | \"Header\"\n      | \"getHeaderProps\"\n      | \"getFooterProps\"\n      | \"Footer\"\n    >,\n    HvTableColumnOptions<D, H>,\n    Partial<UseFiltersColumnProps<D>>,\n    Partial<UseGroupByColumnProps<D>>,\n    Partial<UseResizeColumnsColumnProps<D>>,\n    Partial<UseSortByColumnProps<D>> {\n  Cell?: Renderer<HvCellProps<D, H>>;\n  columns: Array<HvColumnInstance<D, H>>;\n  parent: HvColumnInstance<D, H>;\n  placeholderOf?: HvColumnInstance<D, H>;\n  getHeaderProps: (\n    propGetter?: HvHeaderPropGetter<D, H>\n  ) => HvUseTableHeaderProps;\n  getFooterProps: (\n    propGetter?: HvFooterPropGetter<D, H>\n  ) => HvUseTableFooterProps;\n}\n\nexport interface HvRowInstance<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n> extends Omit<Row<D>, \"cells\" | \"allCells\" | \"subRows\" | \"getRowProps\">,\n    Partial<Omit<UseGroupByRowProps<D>, \"subRows\" | \"values\">>,\n    Partial<UseRowStateRowProps<D>>,\n    Partial<Omit<UseHvRowExpandRowInstance<D>, \"subRows\">>,\n    Partial<UseHvRowSelectionRowInstance> {\n  cells: Array<HvCellInstance<D, H>>;\n  allCells: Array<HvCellInstance<D, H>>;\n  getRowProps: (propGetter?: HvRowPropGetter<D, H>) => HvUseTableRowProps;\n  index: number;\n  original: D;\n  id: string;\n  subRows: Array<HvRowInstance<D, H>>;\n}\n\nexport interface HvCellInstance<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer,\n  V = any\n> extends Omit<Cell<D, V>, \"column\" | \"row\" | \"getCellProps\">,\n    Partial<UseGroupByCellProps<D>> {\n  column: HvColumnInstance<D, H>;\n  row: HvRowInstance<D, H>;\n  getCellProps: (propGetter?: HvCellPropGetter<D, H>) => HvUseTableCellProps;\n}\n// #endregion\n\n// #region PROPS\nexport interface HvUseTableProps\n  extends Omit<TableProps, \"role\">,\n    UseHvTableStickyTableProps,\n    HvTableProps {}\n\nexport interface HvUseTableHeaderProps\n  extends Omit<TableHeaderProps, \"role\">,\n    Omit<UseHvTableStylesTableCellProps, \"classes\">,\n    UseHvTableStickyColumnProps,\n    UseHvHeaderGroupsColumnProps,\n    UseHvResizeColumnProps,\n    Omit<UseHvSortByColumnProps, \"sortDirection\">,\n    HvTableHeaderProps {}\n\nexport interface HvUseTableFooterProps\n  extends TableFooterProps,\n    UseHvTableStylesTableCellProps {}\n\nexport interface HvUseTableRowProps\n  extends Omit<TableRowProps, \"role\">,\n    UseHvTableStylesTableRowProps,\n    UseHvRowSelectionTableRowProps,\n    UseHvRowExpandTableRowProps,\n    HvTableRowProps {}\n\nexport interface HvUseTableCellProps\n  extends Omit<TableCellProps, \"role\">,\n    Omit<UseHvTableStylesTableCellProps, \"variant\" | \"classes\">,\n    UseHvTableStickyCellProps,\n    UseHvHeaderGroupsCellProps,\n    UseHvResizeTableCellProps,\n    UseHvSortByTableCellProps,\n    HvTableCellProps {}\n\n// #endregion\n\nexport type UseHvTableProps = <\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n>(\n  options: HvTableOptions<D, H>,\n  ...plugins: Array<PluginHook<D>>\n) => HvTableInstance<D, H>;\n\nexport { PluginHook as HvTablePluginHook };\n\n// #endregion ##### TYPES #####\n\nconst toTitleCase = (str: string) => {\n  return str\n    .replace(/([^A-Z])([A-Z])/g, \"$1 $2\") // split cameCase\n    .replace(/[_-]+/g, \" \") // split snake_case and lisp-case\n    .toLowerCase()\n    .replace(/(^\\w|\\b\\w)/g, (m) => m.toUpperCase()) // title case words\n    .replace(/\\s+/g, \" \") // collapse repeated whitespace\n    .trim(); // remove leading/trailing whitespace\n};\n\nfunction useDefaultData<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n>(data?: HvTableOptions<D, H>[\"data\"]) {\n  return useMemo(() => {\n    return data || [];\n  }, [data]);\n}\n\nfunction useDefaultColumns<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n>(\n  data: NonNullable<HvTableOptions<D, H>[\"data\"]>,\n  columns?: HvTableOptions<D, H>[\"columns\"]\n) {\n  return useMemo(() => {\n    if (columns != null) {\n      return columns;\n    }\n\n    const uniqueKeys = Object.keys(Object.assign({}, ...data));\n\n    return uniqueKeys\n      .filter((key) => ![\"subRows\", \"subComponent\"].includes(key))\n      .map((key) => ({\n        accessor: key,\n        Header: toTitleCase(key),\n      }));\n  }, [columns, data]);\n}\n\nfunction ensureCorePluginInstallation<\n  D extends object = Record<string, unknown>\n>(\n  plugins: PluginHook<D>[],\n  hvPluginName: string,\n  corePluginToInstall: PluginHook<D>\n) {\n  const indexOfCorePlugin = plugins.findIndex(\n    (plugin) => plugin.pluginName === corePluginToInstall.pluginName\n  );\n  const indexOfHvPlugin = plugins.findIndex(\n    (plugin) => plugin.pluginName === hvPluginName\n  );\n\n  if (\n    indexOfHvPlugin !== -1 &&\n    (indexOfCorePlugin === -1 || indexOfCorePlugin > indexOfHvPlugin)\n  ) {\n    if (indexOfCorePlugin > -1) {\n      plugins.splice(indexOfCorePlugin, 1);\n    }\n\n    plugins.splice(indexOfHvPlugin, 0, corePluginToInstall);\n  }\n}\n\nfunction useInstanceHook<D extends object = Record<string, unknown>>(\n  instance: TableInstance<D>\n) {\n  const { rowsById } = instance;\n\n  Object.assign(instance, {\n    initialRowsById: rowsById,\n  });\n}\n\nfunction useHvTableSetup<D extends object = Record<string, unknown>>(\n  hooks: Hooks<D>\n) {\n  hooks.useInstance.push(useInstanceHook);\n}\nuseHvTableSetup.pluginName = \"useHvTableSetup\";\n\nfunction useHvTable<\n  D extends object = Record<string, unknown>,\n  H extends HvTableHeaderRenderer | undefined = HvTableHeaderRenderer\n>(\n  options: HvTableOptions<D, H>,\n  ...plugins: PluginHook<D>[]\n): HvTableInstance<D, H> {\n  const { data: dataProp, columns: columnsProp, ...others } = options;\n\n  const data = useDefaultData<D, H>(dataProp);\n  const columns = useDefaultColumns<D, H>(data, columnsProp);\n\n  ensureCorePluginInstallation<D>(plugins, \"useHvPagination\", usePagination);\n  ensureCorePluginInstallation<D>(plugins, \"useHvRowExpand\", useExpanded);\n  ensureCorePluginInstallation<D>(plugins, \"useHvSortBy\", useSortBy);\n  ensureCorePluginInstallation<D>(\n    plugins,\n    \"useHvResizeColumns\",\n    useResizeColumns\n  );\n\n  const indexOfHvTableStylesPlugin = plugins.findIndex(\n    (plugin) => plugin.pluginName === \"useHvTableStyles\"\n  );\n  if (indexOfHvTableStylesPlugin === -1) {\n    plugins.push(useHvTableStyles);\n  }\n\n  // Main hook call\n  return useTable<D>(\n    {\n      data,\n      columns,\n      ...others,\n    } as any,\n    useHvTableSetup,\n    ...plugins\n  ) as any;\n}\n\nexport default useHvTable;\n"],"names":["toTitleCase","str","replace","toLowerCase","m","toUpperCase","trim","useDefaultData","data","useMemo","useDefaultColumns","columns","uniqueKeys","Object","keys","assign","filter","key","includes","map","accessor","Header","ensureCorePluginInstallation","plugins","hvPluginName","corePluginToInstall","indexOfCorePlugin","findIndex","plugin","pluginName","indexOfHvPlugin","splice","useInstanceHook","instance","rowsById","initialRowsById","useHvTableSetup","hooks","useInstance","push","useHvTable","options","dataProp","columnsProp","others","usePagination","useExpanded","useSortBy","useResizeColumns","indexOfHvTableStylesPlugin","useHvTableStyles","useTable"],"mappings":";;;;AAolBA,MAAMA,cAAcA,CAACC,QAAgB;AAC5BA,SAAAA,IACJC,QAAQ,oBAAoB,OAAO,EACnCA,QAAQ,UAAU,GAAG,EACrBC,cACAD,QAAQ,eAAgBE,CAAAA,MAAMA,EAAEC,YAAa,CAAA,EAC7CH,QAAQ,QAAQ,GAAG,EACnBI;AACL;AAEA,SAASC,eAGPC,MAAqC;AACrC,SAAOC,QAAQ,MAAM;AACnB,WAAOD,QAAQ,CAAA;AAAA,EAAE,GAChB,CAACA,IAAI,CAAC;AACX;AAEA,SAASE,kBAIPF,MACAG,SACA;AACA,SAAOF,QAAQ,MAAM;AACnB,QAAIE,WAAW,MAAM;AACZA,aAAAA;AAAAA,IACT;AAEMC,UAAAA,aAAaC,OAAOC,KAAKD,OAAOE,OAAO,CAAC,GAAG,GAAGP,IAAI,CAAC;AAEzD,WAAOI,WACJI,OAAQC,CAAQ,QAAA,CAAC,CAAC,WAAW,cAAc,EAAEC,SAASD,GAAG,CAAC,EAC1DE,IAAKF,CAAS,SAAA;AAAA,MACbG,UAAUH;AAAAA,MACVI,QAAQrB,YAAYiB,GAAG;AAAA,IACvB,EAAA;AAAA,EAAA,GACH,CAACN,SAASH,IAAI,CAAC;AACpB;AAEA,SAASc,6BAGPC,SACAC,cACAC,qBACA;AACA,QAAMC,oBAAoBH,QAAQI,UAC/BC,YAAWA,OAAOC,eAAeJ,oBAAoBI,UACxD;AACA,QAAMC,kBAAkBP,QAAQI,UAC7BC,CAAWA,WAAAA,OAAOC,eAAeL,YACpC;AAEA,MACEM,oBAAoB,OACnBJ,sBAAsB,MAAMA,oBAAoBI,kBACjD;AACA,QAAIJ,oBAAoB,IAAI;AAClBK,cAAAA,OAAOL,mBAAmB,CAAC;AAAA,IACrC;AAEQK,YAAAA,OAAOD,iBAAiB,GAAGL,mBAAmB;AAAA,EACxD;AACF;AAEA,SAASO,gBACPC,UACA;AACM,QAAA;AAAA,IAAEC;AAAAA,EAAaD,IAAAA;AAErBpB,SAAOE,OAAOkB,UAAU;AAAA,IACtBE,iBAAiBD;AAAAA,EAAAA,CAClB;AACH;AAEA,SAASE,gBACPC,OACA;AACMC,QAAAA,YAAYC,KAAKP,eAAe;AACxC;AACAI,gBAAgBP,aAAa;AAE7B,SAASW,WAIPC,YACGlB,SACoB;AACjB,QAAA;AAAA,IAAEf,MAAMkC;AAAAA,IAAU/B,SAASgC;AAAAA,IAAa,GAAGC;AAAAA,EAAWH,IAAAA;AAEtDjC,QAAAA,OAAOD,eAAqBmC,QAAQ;AACpC/B,QAAAA,UAAUD,kBAAwBF,MAAMmC,WAAW;AAEzBpB,+BAAAA,SAAS,mBAAmBsB,aAAa;AACzCtB,+BAAAA,SAAS,kBAAkBuB,WAAW;AACtCvB,+BAAAA,SAAS,eAAewB,SAAS;AAE/DxB,+BAAAA,SACA,sBACAyB,gBACF;AAEA,QAAMC,6BAA6B1B,QAAQI,UACxCC,CAAWA,WAAAA,OAAOC,eAAe,kBACpC;AACA,MAAIoB,+BAA+B,IAAI;AACrC1B,YAAQgB,KAAKW,gBAAgB;AAAA,EAC/B;AAGA,SAAOC,SACL;AAAA,IACE3C;AAAAA,IACAG;AAAAA,IACA,GAAGiC;AAAAA,EAAAA,GAELR,iBACA,GAAGb,OACL;AACF;"}