# @hitachivantara/app-shell-vite-plugin

Hitachi Vantara App Shell Vite Plugin: Streamlines development and build processes for App Shell.

## Overview

The @hitachivantara/app-shell-vite-plugin enhances the App Shell experience by automating essential development and build tasks, such as processing configurations, creating virtual endpoints, and managing importmaps and base paths.

This plugin is responsible for the hard lifting during development time and build time.
It performs the following actions:

- copy all the required js bundles to final "bundles" folders
- process the `app-shell.config.json` file
- create virtual endpoints to support dev mode
- create virtual main.tsx and App.tsx Files: These files were there strictly for development purposes, as what ultimately matters are the ESM modules
exported and consumed by others
- create `importmap` and inject it into `index.html`
- create <base href="...">  tag and inject it into `index.html`

## How to use

Install the plugin

```
npm install -D @hitachivantara/app-shell-vite-plugin
```

Add the plugin to the vite plugin list in `vite.config.js`.

```javascript
// imports omitted
import { HvAppShellVitePlugin } from "@hitachivantara/app-shell-vite-plugin";

export default defineConfig(({ mode }) => {
  return {
    plugins: [
      // other plugins omitted
      HvAppShellVitePlugin({ mode })
    ],
  };
});
```

## app-shell.config

The configuration file must be placed at the root directory of the app.
The vite-plugin can process the `app-shell.config` as a json file or Typescritp file.

Managing settings in TypeScript, provide more efficiency and type safety features. 
You can check this configuration in action [here](../../samples/default-app/app-shell.config.ts).

## Automatic configuration

`autoViewsAndRoutes`: automatically exports views from the "src/pages" directory (or any other specified folder).
This includes automatic route configuration (merges with existing ones, if any).

`autoDevMenu` (dev only): creates a navigation menu derived from the views.
This ensures a more organized and streamlined development process.

Empty Configuration Validity: With these automatic features in place, the configuration file isn't even mandatory for dev environments.

## `<base href="...">`  tag

The <base href="...">  tag is automatically injected at index.html file during the build process. The value of tag is the same as for the app base path. More information related to the way app base path is obtained can be checked [here](../../../docs/app-shell-utilities.md#usehvappshellbasepath). 

