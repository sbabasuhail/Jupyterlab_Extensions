{"version":3,"file":"vite-metadata-plugin.js","sourceRoot":"","sources":["../src/vite-metadata-plugin.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,IAAI,CAAC;AAIpB,OAAO,EAAE,aAAa,EAAE,MAAM,iBAAiB,CAAC;AAEhD,MAAM,cAAc,GAAG,CAAC,eAAuB,EAAU,EAAE;IACzD,MAAM,WAAW,GAAG,EAAE,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;IAC7D,MAAM,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;IAC9C,OAAO,aAAa,CAAC,OAAO,CAAC;AAC/B,CAAC,CAAC;AAEF;;;;GAIG;AACH,MAAM,cAAc,GAAG,GAAiB,EAAE;IACxC,MAAM,eAAe,GAAG,cAAc,CACpC,aAAa,CAAC,wCAAwC,CAAC,CACxD,CAAC;IAEF,MAAM,yBAAyB,GAAG,cAAc,CAC9C,aAAa,CAAC,oDAAoD,CAAC,CACpE,CAAC;IAEF,OAAO;QACL,IAAI,EAAE,sBAAsB;QAC5B,kBAAkB;YAChB,OAAO;gBACL;oBACE,GAAG,EAAE,MAAM;oBACX,KAAK,EAAE;wBACL,IAAI,EAAE,mBAAmB;wBACzB,OAAO,EAAE,eAAe;qBACzB;iBACF;gBACD;oBACE,GAAG,EAAE,MAAM;oBACX,KAAK,EAAE;wBACL,IAAI,EAAE,+BAA+B;wBACrC,OAAO,EAAE,yBAAyB;qBACnC;iBACF;aACF,CAAC;QACJ,CAAC;KACF,CAAC;AACJ,CAAC,CAAC;AAEF,eAAe,cAAc,CAAC","sourcesContent":["import fs from \"fs\";\n\nimport type { PluginOption } from \"vite\";\n\nimport { resolveModule } from \"./nodeModule.js\";\n\nconst extractVersion = (packageJsonFile: string): string => {\n  const packageJson = fs.readFileSync(packageJsonFile, \"utf8\");\n  const packageObject = JSON.parse(packageJson);\n  return packageObject.version;\n};\n\n/**\n * This plugin injects metadata into the index.html file.\n * The metadata is used to help any troubleshoot activity by referencing\n * the version of the app-shell-vite-plugin and app-shell packages used by the app.\n */\nconst injectMetadata = (): PluginOption => {\n  const appShellVersion = extractVersion(\n    resolveModule(\"@hitachivantara/app-shell/package.json\")\n  );\n\n  const appShellVitePluginVersion = extractVersion(\n    resolveModule(\"@hitachivantara/app-shell-vite-plugin/package.json\")\n  );\n\n  return {\n    name: \"vite-metadata-plugin\",\n    transformIndexHtml() {\n      return [\n        {\n          tag: \"meta\",\n          attrs: {\n            name: \"app-shell-version\",\n            content: appShellVersion\n          }\n        },\n        {\n          tag: \"meta\",\n          attrs: {\n            name: \"app-shell-vite-plugin-version\",\n            content: appShellVitePluginVersion\n          }\n        }\n      ];\n    }\n  };\n};\n\nexport default injectMetadata;\n"]}