import{j as e,a as S,F as P}from"./context-73c790cf.js";import{useRef as _,useMemo as T,useState as N,useCallback as H}from"react";import{createPortal as z}from"react-dom";import{c as L,t as i,b as g,d as W,g as q,e as F,f as G,h as R,i as M,u as $,v as B,H as V}from"./v4-e12fed77.js";import{I as X,H as Y,a as J,S as K,r as k,l as Q,C as Z}from"./index-88e29ec3.js";import"@hitachivantara/uikit-react-shared";import{s as ee}from"./textUtil-2cb77545.js";import"@emotion/cache";import"@emotion/react";import"./client-ab02b1a0.js";import"./Provider-4bb457f2.js";import"@hitachivantara/app-shell-shared";import"react-router-dom";import"./i18nextBrowserLanguageDetector-f736ff85.js";const{staticClasses:Se,useClasses:te}=L("HvAppSwitcher",{root:{display:"flex",flexDirection:"column",backgroundColor:i.colors.atmo1,overflow:"hidden",padding:i.spacing("sm",0,"sm","sm")},item:{},itemSelected:{},itemDisabled:{},itemTrigger:{},itemIcon:{},itemTitle:{},itemInfoIcon:{},actionsContainer:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",overflowY:"auto",padding:"4px 0 4px 4px"},footerContainer:{display:"flex",alignItems:"center",marginTop:"auto",height:52,padding:`${i.space.sm} ${i.space.sm} 4px 4px`},open:{zIndex:"1200",position:"absolute",top:"50px",overflowX:"hidden",boxShadow:i.colors.shadow},closed:{display:"none"},title:{minHeight:36,padding:`4px ${i.space.sm} ${i.space.sm} 4px`,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},single:{width:320},dual:{width:640},fluid:{}}),ie=({className:d,title:a})=>{const p=_(null),r=T(()=>{const s=p.current;return s?s.scrollWidth>s.clientWidth||s.scrollHeight>s.clientHeight:!1},[]);return e(W,{disableHoverListener:!r,placement:"top-start",title:e(g,{children:a}),children:e(g,{className:d,variant:"label",component:"span",ref:p,children:a})})},j=ie,{staticClasses:Ie,useClasses:se}=L("HvAppSwitcher-Action",{root:{width:"100%",maxWidth:280,minHeight:52,marginRight:i.space.sm},icon:{display:"flex",minWidth:40,justifyContent:"center"},iconUrl:{width:32},iconInfo:{minWidth:32},disabled:{},selected:{},typography:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",minHeight:52,padding:`6px ${i.space.xs}`,border:"none",borderLeft:`solid 2px ${i.colors.secondary}`,cursor:"pointer",textDecoration:"inherit",color:"inherit",backgroundColor:"inherit","$disabled &":{cursor:"not-allowed"}},title:{flexGrow:1,margin:`0 ${i.space.xs}`,textAlign:"left",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:"inherit"}}),oe=({id:d,className:a,classes:p,application:r,onClickCallback:s=()=>{},isSelectedCallback:v=()=>!1})=>{const{classes:o,cx:b}=se(p),{name:m,description:l,disabled:c,iconElement:f,iconUrl:t,url:n,target:x}=r,h=c?i.colors.secondary_60:q(r==null?void 0:r.color,i.colors.secondary),[D,E]=N(!0),U=()=>{if(f)return f;if(t&&D)return e("img",{className:o.iconUrl,src:t,onError:()=>{E(!1)},alt:l});const u=m.split(" "),y=u[0].substring(0,1)+(u[1]?u[1].substring(0,1):"");return e(G,{size:"sm",backgroundColor:h,variant:"square","aria-hidden":!0,children:y})},w=v(r),I=H(u=>{if(c){u.preventDefault();return}s==null||s(u,{...r,isSelected:w})},[r,c,w,s]),A=n!=null,C=F(d,"hvAction-description"),O=H(u=>{const y={className:o.typography,onClick:I,style:{borderColor:h},"aria-label":m,...l&&{"aria-describedby":C}};return A?e(g,{component:"a",href:n,target:x||"_top",...y,children:u}):e(g,{component:"button",...y,children:u})},[o.typography,h,l,C,I,A,m,x,n]);return e(Y,{id:d,interactive:!0,tabIndex:0,selected:w,disabled:c,className:b(o.root,{[o.disabled]:c,[o.selected]:w},a),children:O(S(P,{children:[e("div",{className:o.icon,children:U()}),e(j,{title:m,className:o.title}),l&&e(W,{disableFocusListener:!0,disableTouchListener:!0,title:e(g,{children:l}),children:e("div",{children:e(X,{className:o.iconInfo,role:"img","aria-label":l,id:C})})})]}))})},re=d=>{const{id:a,className:p,classes:r,layout:s="single",title:v,applications:o,onActionClickedCallback:b=()=>{},isActionSelectedCallback:m=()=>!1,header:l,footer:c,isOpen:f}=R("HvAppSwitcher",d),{classes:t,cx:n}=te(r),x=T(()=>o&&(o==null?void 0:o.map(h=>{if(h.name)return e(oe,{application:h,onClickCallback:b,isSelectedCallback:m,classes:{root:t.item,selected:t.itemSelected,disabled:t.itemDisabled,typography:t.itemTrigger,icon:t.itemIcon,title:t.itemTitle,iconInfo:t.itemInfoIcon}},h.id||`${h.name}_${h.url}`)})),[o,t,m,b]);return S("div",{id:a,className:n(t.root,t[s],{[t.open]:!!f,[t.closed]:f===!1},p),children:[l&&e(g,{component:"div",variant:"label",className:t.title,children:l})||v&&e(j,{className:t.title,title:v}),e(J,{disableGutters:!0,className:t.actionsContainer,children:x}),c&&e(g,{component:"div",variant:"label",className:t.footerContainer,children:c})]})},ne=M("div",{target:"e1qu5ye60"})("position:fixed;max-height:calc(100vh - ",i.header.height,");top:",i.header.height,";right:0;display:flex;box-shadow:",i.colors.shadow,";z-index:calc(",i.zIndices.banner," - 1);"),ae=ne,le=({title:d,apps:a})=>{const{t:p}=$(),{t:r}=$(K),[s,v]=N(!1),o=()=>a?a.map(n=>({name:r(n.label),description:n.description?r(n.description).toString():void 0,url:ee(n.url,":")?n.url:r(n.url).toString(),target:n.target==="NEW"?"_blank":"_top",iconElement:n.icon&&e(k,{name:n.icon.name})})):[],b=()=>{v(!1)},m=()=>{b()},l=()=>{v(!s)};if(!a||a.length===0)return null;const c=d?r(d):p("header.appSwitcher.title"),f=`appSwitcherPanel-${B()}`,t={...s?{"aria-controls":f}:{}};return e(Z,{onClickAway:b,children:S("div",{style:{display:"flex",margin:0},children:[e(V,{icon:!0,onClick:l,variant:"secondaryGhost","aria-label":c,"aria-expanded":s,...t,children:e(k,{name:"AppSwitcher"})}),s&&z(e(ae,{id:f,role:"region","aria-label":p("header.appSwitcher.ariaLabel")??"",children:e(re,{applications:o(),onActionClickedCallback:m,header:e(g,{variant:"label",children:c})})}),Q())]})})},Ae=le;export{Ae as default};
